//
//  TRProxyResolverTests.m
//  TRToolKit
//
//  Created by Pedro Gomes on 18/03/2014.
//  Copyright (c) 2014 Thomson Reuters. All rights reserved.
//

#import "TRAsyncTestCase.h"
#import "TRProxyResolver.h"
#import "TRUnitTestingMacros.h"

////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////
@interface TRProxyResolverTests : TRAsyncTestCase

@property (nonatomic, strong) TRProxyResolver *resolver;

@end

////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////
@implementation TRProxyResolverTests

////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////
- (void)setUp
{
    [super setUp];
    
    self.resolver = [TRProxyResolver sharedResolver];
}

////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////
- (void)tearDown
{
    [super tearDown];
}

////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////
- (void)DECLARE_TEST_METHOD(testResolveURLNoProxies)
{
    NSURL *destinationURL = [NSURL URLWithString:@"wss://powercurve-mob-dev.thomsonreuters.com/wamp/ws"];
    
    [self.resolver resolveURL:destinationURL
            completionHandler:^(TRProxyResolverResult *result) {
                NSLog(@"Resolved proxies = %@", result.proxies);
                [self notify:XCTAsyncTestCaseStatusSucceeded];
            }
                 errorHandler:^(NSError *error) {
                     [self notify:XCTAsyncTestCaseStatusFailed];
                 }];
    [self waitForStatus:XCTAsyncTestCaseStatusSucceeded timeout:60.0];
}

////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////
- (void)DECLARE_TEST_METHOD(testResolveURLExplicityProxy)
{
    
}

////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////
- (void)DECLARE_TEST_METHOD(testResolveURLAutomaticProxyConfig)
{
    
}

@end
